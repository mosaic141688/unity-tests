"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ava_1 = require("ava");
const pipeline_1 = require("../../src/pipeline");
const valid_where_transform = {
    type: 'where',
    options: {
        expression: { value: 1 }
    }
};
const valid_where_transform_with_deps = {
    type: 'where',
    options: {
        expression: {
            gt: [
                { dep: '$element' },
                { dep: '@min_age' }
            ]
        }
    }
};
ava_1.test('section()', t => {
    t.throws(() => {
        pipeline_1.section('[number]', { type: 'wrong', options: {} });
    });
    t.notThrows(() => {
        pipeline_1.section('[number]', valid_where_transform);
    });
    const where_section = pipeline_1.section('[number]', valid_where_transform_with_deps);
    t.is(where_section.input_type, '[number]');
    t.is(where_section.output_type, '[number]');
    t.deepEqual(where_section.deps, ['@min_age']);
});
ava_1.test('extractPipelineDeps()', t => {
    const deps = pipeline_1.extractPipelineConfigDeps([valid_where_transform_with_deps]);
    t.deepEqual(deps, ['@min_age']);
});
//# sourceMappingURL=pipeline_test.js.map